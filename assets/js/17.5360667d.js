(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{214:function(s,n,t){"use strict";t.r(n);var a=t(28),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("let Vue\n\nclass Store {  // 用户获取的是这个Store类的实例\n    // 当用户new实例时传入的所有属性\n    constructor(options){\n        // console.log(options)\n        // options.state\n        this.vm = new Vue({  // 创建vue实例保证状态更新可以刷新试图\n            data() {     // 默认这个状态会被Object.defineProperty(es5)重新定义\n                return {\n                    Vmstate: options.state\n                }\n            },\n        })\n        // console.log(this) => Store\n        let getters = options.getters\n        this.getters = {}\n        Object.keys(getters).forEach(key=>{\n            Object.defineProperty(this.getters,key,{   //当数据变执行\n                get:()=>{\n                    // todo...\n                    return getters[key](this.state)\n                },\n                // set:(val)=>{\n                //     val = getters[key]\n                // }\n            })\n        })\n\n        // 将用户定义的mutation放到store上\n        let mutations = options.mutations\n        this.mutations = {}\n        Object.keys(mutations).forEach(key => {\n            // Object.defineProperty(this.mutations,key,{\n            //     get:()=>{\n            //         return mutations[key](this.state,payload)\n            //     }\n            // })\n            this.mutations[key] = (payload)=> {  // 订阅   //一个方法function\n                mutations[key](this.state,payload)\n            }\n        })\n\n        let actions = options.actions\n        this.actions = {}\n        Object.keys(actions).forEach(key => {\n            this.actions[key] = (payload)=>{  // 一个方法function\n                actions[key](this,payload)\n            } \n        })\n    }\n    // this.$store.commit(functionName,payload)\n    commit = (mutationsName,payload) => { //es7的写法  这个里面的this永远指向当前store的实例\n        this.mutations[mutationsName](payload)  //发布\n    }\n    dispatch = (actionsName,payload) =>{\n        this.actions[actionsName](payload)\n    }\n    get state(){ //获取实例上的Vmstate属性就会执行此方法   只要Vmstate变化就执行（es6的类访问器）\n      return this.vm.Vmstate       \n    }\n}\n\n// install注册插件\nconst install = (_Vue) =>{  // vue的构造函数\n    Vue = _Vue      // vue的构造函数\n    // 放在vue的原型上不对 因为默认会给所有的实例增加\n    // 只从当前的根实例开始所有跟实例的子组件才有$store方法\n    Vue.mixin({     // 组件的创建过程是先父后子\n        beforeCreate() {\n            //把父组件的store属性放到每一个组件的实例上\n            // console.log(this.$root)\n            if(this.$options.store){\n                //根组件main.js\n                // console.log(this.$options.name)\n                this.$store = this.$options.store\n            } else {\n                // app.vue\n                this.$store = this.$parent && this.$parent.$store\n            }\n        },\n    })  // 混入的生命周期先于组件的生命周期\n}\n\nexport default {\n    install,\n    Store\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);